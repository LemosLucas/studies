!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"create",value:function(t,n,r){return new Proxy(t,{get:function(t,o,a){return e._ehFuncao(t[o])&&n.includes(o)?function(){console.log('"'.concat(o,'" disparou a armadilha')),t[o].apply(t,arguments),r(t)}:t[o]},set:function(e,t,o,a){var i=Reflect.set(e,t,o);return n.includes(t)&&r(e),i}})}},{key:"_ehFuncao",value:function(e){return r(e)==("undefined"==typeof Function?"undefined":r(Function))}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function e(t,n){i(this,e);for(var r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];var u=a.create(t,o,(function(e){n.update(e)}));return n.update(t),u};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=["negociacoes"],s=null,l=null,p=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("Não é possível criar instâncias dessa classe")}var t,n,r;return t=e,r=[{key:"getConnection",value:function(){return new Promise((function(t,n){if(s)return t(s);var r=indexedDB.open("jscangaceiro",2);r.onupgradeneeded=function(t){e._createStores(t.target.result)},r.onsuccess=function(e){s=e.target.result,l=s.close.bind(s),s.close=function(){throw new Error("Você não pode fechar diretamente a conexão")},t(e.target.result)},r.onerror=function(e){console.log(e.target.error),n(e.target.error.name)}}))}},{key:"_createStores",value:function(e){f.forEach((function(t){e.objectStoreNames.contains(t)&&e.deleteObjectStore(t),e.createObjectStore(t,{autoIncrement:!0})}))}},{key:"closeConnection",value:function(){s&&l()}}],(n=null)&&u(t.prototype,n),r&&u(t,r),e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._connection=t,this._store="negociacoes"}var t,n,r;return t=e,(n=[{key:"adiciona",value:function(e){var t=this;return new Promise((function(n,r){var o=t._connection.transaction([t._store],"readwrite").objectStore(t._store).add(e);o.onsuccess=function(e){return n()},o.onerror=function(e){console.log(e.target.error),r("Não foi possível salvar a negociação")}}))}},{key:"listaTodos",value:function(){var e=this;return new Promise((function(t,n){var r=[],o=e._connection.transaction([e._store],"readwrite").objectStore(e._store).openCursor();o.onsuccess=function(e){var n=e.target.result;if(n){var o=new Q(n.value._data,n.value._quantidade,n.value._valor);r.push(o),n.continue()}else t(r)},o.onerror=function(e){console.log(e.target.error),n("Não foi possível listar nas negociações")}}))}},{key:"apagaTodos",value:function(){var e=this;return new Promise((function(t,n){var r=e._connection.transaction([e._store],"readwrite").objectStore(e._store).clear();r.onsuccess=function(e){return t()},r.onerror=function(e){console.log(e.target.error),n("Não foi possível apagar as negociações")}}))}}])&&y(t.prototype,n),r&&y(t,r),e}();function h(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))}}function d(){return m.apply(this,arguments)}function m(){return(m=b(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getConnection();case 2:return t=e.sent,e.abrupt("return",new v(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){var t="function"==typeof Map?new Map:void 0;return(O=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return S(e,arguments,P(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),k(r,e)})(e)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function S(e,t,n){return(S=j()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&k(o,n.prototype),o}).apply(null,arguments)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w(this,t),(e=_(this,P(t).call(this,n))).name=e.constructor.name,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),t}(O(Error)),E=x;function T(e){return function(e){return e instanceof E||Object.getPrototypeOf(e)instanceof E}(e)?e.message:(console.log(e),"Não foi possível realizar a operação.")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"_handleErrors",value:function(e){if(!e.ok)throw new Error(e.statusText);return e}},{key:"get",value:function(e){var t=this;return fetch(e).then((function(e){return t._handleErrors(e)})).then((function(e){return e.json()}))}}])&&D(t.prototype,n),r&&D(t,r),e}();function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return function(t,n,r){var o=r.value,a=0;return r.value=function(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];event&&event.preventDefault(),clearInterval(a),a=setTimeout((function(){return o.apply(t,r)}),e)},r}}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e,t,n){return(C=A()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&q(o,n.prototype),o}).apply(null,arguments)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(e,t){document.querySelector(t.selector).addEventListener(t.event,(function(n){t.prevent&&n.preventDefault(),e[t.propertyKey](n)}))}function M(e){throw new Error("".concat(e," é um parâmetro obrigatório"))}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M("event"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M("selector"),n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,o,a){return Reflect.defineMetadata("bindEvent",{event:e,selector:t,prevent:n,propertyKey:o},Object.getPrototypeOf(r),o),a}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M("data"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M("quantidade"),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M("valor");I(this,e),Object.assign(this,{_quantidade:n,_valor:r}),this._data=new Date(t.getTime()),Object.freeze(this)}var t,n,r;return t=e,(n=[{key:"equals",value:function(e){return JSON.stringify(this)==JSON.stringify(e)}},{key:"volume",get:function(){return this._quantidade*this._valor}},{key:"data",get:function(){return new Date(this._data.getTime())}},{key:"quantidade",get:function(){return this._quantidade}},{key:"valor",get:function(){return this._valor}}])&&L(t.prototype,n),r&&L(t,r),e}();function J(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._http=new R}var t,n,r,o,a;return t=e,(n=[{key:"obtemNegociacoesDaSemana",value:function(){return this._http.get("negociacoes/semana").then((function(e){return e.map((function(e){return new Q(new Date(e.data),e.quantidade,e.valor)}))}),(function(e){throw new x("Não foi possível obter as negociações da semana")}))}},{key:"obtemNegociacoesDaSemanaAnterior",value:function(){return this._http.get("negociacoes/anterior").then((function(e){return e.map((function(e){return new Q(new Date(e.data),e.quantidade,e.valor)}))}),(function(e){throw new x("Não foi possível obter as negociações da semana anterior")}))}},{key:"obtemNegociacoesDaSemanaRetrasada",value:function(){return this._http.get("negociacoes/retrasada").then((function(e){return e.map((function(e){return new Q(new Date(e.data),e.quantidade,e.valor)}))}),(function(e){throw new x("Não foi possível obter as negociações da semana retrasada")}))}},{key:"obtemNegociacoesDoPeriodo",value:(o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.obtemNegociacoesDaSemana(),this.obtemNegociacoesDaSemanaAnterior(),this.obtemNegociacoesDaSemanaRetrasada()]);case 3:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return e.concat(t)}),[]).sort((function(e,t){return t.data.getTime()-e.data.getTime()})));case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),new x("Não foi possível obter as negociações do período");case 11:case 12:case"end":return e.stop()}}),e,this,[[0,7]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){J(a,n,r,i,c,"next",e)}function c(e){J(a,n,r,i,c,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})}])&&H(t.prototype,n),r&&H(t,r),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._negociacoes=[],Object.freeze(this)}var t,n,r;return t=e,(n=[{key:"adiciona",value:function(e){this._negociacoes.push(e)}},{key:"paraArray",value:function(){return[].concat(this._negociacoes)}},{key:"esvazia",value:function(){this._negociacoes.length=0}},{key:"volumeTotal",get:function(){return this._negociacoes.reduce((function(e,t){return e+t.volume}),0)}}])&&U(t.prototype,n),r&&U(t,r),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elemento=document.querySelector(t)}var t,n,r;return t=e,(n=[{key:"update",value:function(e){this._elemento.innerHTML=this.template(e)}},{key:"template",value:function(e){throw new Error("Você precisa implementar o método template")}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function t(){return X(this,t),$(this,ee(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,e),n=t,(r=[{key:"template",value:function(e){return e.texto?'<p class="alert alert-info">'.concat(e.texto,"</p>"):"<p></p>"}}])&&Z(n.prototype,r),o&&Z(n,o),t}(G);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ae(t).call(this,"A data deve estar no formato dd/mm/aaaa"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),t}(x);function ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function fe(e,t,n){return(fe=ue()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&se(o,n.prototype),o}).apply(null,arguments)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("Esta classe não pode ser instanciada")}var t,n,r;return t=e,r=[{key:"paraTexto",value:function(e){return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear())}},{key:"paraData",value:function(e){if(!/\d{2}\/\d{2}\/\d{4}/.test(e))throw new ce;return fe(Date,le(e.split("/").reverse().map((function(e,t){return e-t%2}))))}}],(n=null)&&pe(t.prototype,n),r&&pe(t,r),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return he(this,t),de(this,me(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,e),n=t,(r=[{key:"template",value:function(e){return'\n        <table class="table table-hover table-bordered">\n            <thead>\n                <tr>\n                    <th>DATA</th>\n                    <th>QUANTIDADE</th>\n                    <th>VALOR</th>\n                    <th>VOLUME</th>\n                </tr>\n            </thead>\n            \n            <tbody>\n                '.concat(e.paraArray().map((function(e){return"\n                    <tr>\n                        <td>".concat(ye.paraTexto(e.data),"</td>\n                        <td>").concat(e.quantidade,"</td>\n                        <td>").concat(e.valor,"</td>\n                        <td>").concat(e.volume,"</td>\n                    </tr>                        \n                ")})).join(""),'\n            </tbody>\n            \n            <tfoot>\n                <tr>\n                    <td colspan="3"></td>\n                    <td>').concat(e.volumeTotal,"</td>            \n                </tr>\n            </tfoot>\n            \n        </table>               \n        ")}}])&&be(n.prototype,r),o&&be(n,o),t}(G);function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var je,Se,ke,Pe,xe,Ee,Te,De,Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";_e(this,e),this._texto=t}var t,n,r;return t=e,(n=[{key:"texto",get:function(){return this._texto},set:function(e){this._texto=e}}])&&Oe(t.prototype,n),r&&Oe(t,r),e}();function Ne(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ne(a,r,o,i,c,"next",e)}function c(e){Ne(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n,r,o){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}new(je=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return document.querySelector(e)}));return function(e){var t=e,n=function(){var e=C(t,z(r));Object.getOwnPropertyNames(t.prototype).forEach((function(t){Reflect.hasMetadata("bindEvent",e,t)&&F(e,Reflect.getMetadata("bindEvent",e,t))}))};return n.prototype=t.prototype,n}}("#data","#quantidade","#valor"),Se=V("submit",".form"),ke=N(),Pe=V("click","#botao-importa"),xe=N(),Ee=V("click","#botao-apaga"),je((qe((De=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{_inputData:t,_inputQuantidade:n,_inputValor:r}),this._negociacoes=new c(new B,new we("#negociacoes"),"adiciona","esvazia"),this._mensagem=new c(new Re,new ne("#mensagemView"),"texto"),this._service=new K,this._init()}var t,n,r,o,a,i,u;return t=e,(n=[{key:"_init",value:(u=Ae(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:return t=e.sent,e.next=6,t.listaTodos();case 6:e.sent.forEach((function(e){return n._negociacoes.adiciona(e)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this._mensagem.texto=T(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return u.apply(this,arguments)})},{key:"adiciona",value:(i=Ae(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this._criaNegociacao(),e.next=4,d();case 4:return r=e.sent,e.next=7,r.adiciona(n);case 7:this._negociacoes.adiciona(n),this._mensagem.texto="Negociação adicionada com sucesso",this._limpaFormulario(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this._mensagem.texto=T(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e){return i.apply(this,arguments)})},{key:"_limpaFormulario",value:function(){this._inputData.value="",this._inputQuantidade.value=1,this._inputValor.value=0,this._inputData.focus()}},{key:"_criaNegociacao",value:function(){return new Q(ye.paraData(this._inputData.value),parseInt(this._inputQuantidade.value),parseFloat(this._inputValor.value))}},{key:"importaNegociacoes",value:(a=Ae(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._service.obtemNegociacoesDoPeriodo();case 3:t=e.sent,console.log(t),t.filter((function(e){return!n._negociacoes.paraArray().some((function(t){return e.equals(t)}))})).forEach((function(e){return n._negociacoes.adiciona(e)})),this._mensagem.texto="Negociações do período importadas com sucesso",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this._mensagem.texto=T(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return a.apply(this,arguments)})},{key:"apaga",value:(o=Ae(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:return t=e.sent,e.next=6,t.apagaTodos();case 6:this._negociacoes.esvazia(),this._mensagem.texto="Negociações apagadas com sucesso",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this._mensagem.texto=T(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return o.apply(this,arguments)})}])&&Ce(t.prototype,n),r&&Ce(t,r),e}()).prototype,"adiciona",[Se,ke],Object.getOwnPropertyDescriptor(De.prototype,"adiciona"),De.prototype),qe(De.prototype,"importaNegociacoes",[Pe,xe],Object.getOwnPropertyDescriptor(De.prototype,"importaNegociacoes"),De.prototype),qe(De.prototype,"apaga",[Ee],Object.getOwnPropertyDescriptor(De.prototype,"apaga"),De.prototype),Te=De))||Te);var ze=new Q(new Date,1,200),Fe=new Headers;Fe.set("Content-Type","application/json");var Me=JSON.stringify(ze);fetch("/negociacoes",{method:"POST",headers:Fe,body:Me}).then((function(){return console.log("Dado enviado com sucesso")}))}]);